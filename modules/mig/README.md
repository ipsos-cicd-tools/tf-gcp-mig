<!-- BEGIN_TF_DOCS -->
## Usage
Basic usage of this module is as follows:
```
module "mig" {
  source  = "git::https://github.com/ipsos-cicd-tools/tf-gcp-mig//modules/mig?ref=<version number>"
  
  ## Required Variables ##
  base_instance_name  = 
  name  = 
  templates  = 
  
  ## Optional Variables ##
  auto_healing_policies  =   null
  autoscaling  =   null
  description  =   null
  list_managed_instances_results  =   "PAGELESS"
  named_port  =   null
  project  =   null
  target_size  =   0
  update_policy  =   null
  versions  =   []
  wait_for_instances  =   false
  wait_for_instances_status  =   "STABLE"
  zone  =   null
}
```
## Resources

| Name | Type |
|------|------|
| [google_compute_autoscaler.default](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_autoscaler) | resource |
| [google_compute_health_check.default](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_health_check) | resource |
| [google_compute_instance_group_manager.default](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_instance_group_manager) | resource |
| [google_compute_instance_template.default](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_instance_template) | resource |
## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_auto_healing_policies"></a> [auto\_healing\_policies](#input\_auto\_healing\_policies) | The autohealing policies for this managed instance group. You can specify only one value. | <pre>object({<br>    health_check = object({<br>      name                = string<br>      description         = optional(string, null)<br>      healthy_threshold   = optional(number, 2)<br>      unhealthy_threshold = optional(number, 2)<br>      timeout_sec         = optional(number, 5)<br>      check_interval_sec  = optional(number, 5)<br>      http_health_check = optional(object({<br>        host               = optional(string, null)<br>        request_path       = optional(string, "/")<br>        response           = optional(string, null)<br>        port               = optional(number, 80)<br>        proxy_header       = optional(string, "NONE")<br>        port_specification = optional(string, "USE_FIXED_PORT")<br>      }), null)<br>      https_health_check = optional(object({<br>        host               = optional(string, null)<br>        request_path       = optional(string, "/")<br>        response           = optional(string, null)<br>        port               = optional(number, 443)<br>        proxy_header       = optional(string, "NONE")<br>        port_specification = optional(string, "USE_FIXED_PORT")<br>      }), null)<br>      tcp_health_check = optional(object({<br>        request            = optional(string, null)<br>        response           = optional(string, null)<br>        port               = optional(number, 443)<br>        proxy_header       = optional(string, "NONE")<br>        port_specification = optional(string, "USE_FIXED_PORT")<br>      }), null)<br>      ssl_health_check = optional(object({<br>        request            = optional(string, null)<br>        response           = optional(string, null)<br>        port               = optional(number, 443)<br>        proxy_header       = optional(string, "NONE")<br>        port_specification = optional(string, "USE_FIXED_PORT")<br>      }), null)<br>      http2_health_check = optional(object({<br>        host               = optional(string, null)<br>        request_path       = optional(string, "/")<br>        response           = optional(string, null)<br>        port               = optional(number, 443)<br>        proxy_header       = optional(string, "NONE")<br>        port_specification = optional(string, "USE_FIXED_PORT")<br>      }), null)<br>      log_config = optional(object({<br>        enable = optional(bool, false)<br>      }), null)<br>    })<br>    initial_delay_sec = number<br>  })</pre> | `null` | no |
| <a name="input_autoscaling"></a> [autoscaling](#input\_autoscaling) | value | <pre>object({<br>    name        = string<br>    description = optional(string, null)<br>    zone        = string<br>    project     = optional(string, null)<br>    autoscaling_policy = list(object({<br>      min_replicas    = number<br>      max_replicas    = number<br>      cooldown_period = optional(number, 60)<br>      mode            = optional(string, "OFF")<br>      scale_in_control = optional(object({<br>        max_scaled_in_replicas = optional(object({<br>          fixed   = optional(number, null)<br>          percent = optional(number, null)<br>        }), null)<br>        time_window_sec = optional(number, null)<br>      }), null)<br>      cpu_utilization = optional(object({<br>        predictive_method = optional(string, "NONE")<br>        target            = optional(number, null)<br>      }), null)<br>      load_balancing_utilization = optional(object({<br>        target = optional(number, 0.8)<br>      }), null)<br>      scaling_schedules = list(object({<br>        name                  = string<br>        min_required_replicas = number<br>        schedule              = string<br>        time_zone             = optional(string, null)<br>        duration_sec          = number<br>        disabled              = optional(bool, false)<br>        description           = optional(string, null)<br>      }))<br>    }))<br>  })</pre> | `null` | no |
| <a name="input_base_instance_name"></a> [base\_instance\_name](#input\_base\_instance\_name) | The base instance name to use for instances in this group. | `string` | n/a | yes |
| <a name="input_description"></a> [description](#input\_description) | An optional textual description of the instance group manager. | `string` | `null` | no |
| <a name="input_list_managed_instances_results"></a> [list\_managed\_instances\_results](#input\_list\_managed\_instances\_results) | Pagination behavior of the listManagedInstances API method for this managed instance group. Valid values are: PAGELESS, PAGINATED. If PAGELESS (default). | `string` | `"PAGELESS"` | no |
| <a name="input_name"></a> [name](#input\_name) | The name of the instance group manager. | `string` | n/a | yes |
| <a name="input_named_port"></a> [named\_port](#input\_named\_port) | The named port configuration. | <pre>object({<br>    name = string<br>    port = number<br>  })</pre> | `null` | no |
| <a name="input_project"></a> [project](#input\_project) | The ID of the project in which the resource belongs. | `string` | `null` | no |
| <a name="input_target_size"></a> [target\_size](#input\_target\_size) | The target number of running instances for this managed instance group. This value will fight with autoscaler settings when set, and generally shouldn't be set when using one. | `number` | `0` | no |
| <a name="input_templates"></a> [templates](#input\_templates) | value | <pre>list(object({<br>    name         = string<br>    machine_type = string<br>    disks = list(object({<br>      source_image = optional(string, null)<br>      source       = optional(string, null)<br>      auto_delete  = optional(bool, true)<br>      boot         = optional(bool, false)<br>      device_name  = optional(string, null)<br>      disk_name    = optional(string, null)<br>      mode         = optional(string, null)<br>      disk_type    = optional(string, null)<br>      disk_size_gb = optional(number, null)<br>      labels       = optional(map(any), {})<br>    }))<br>    can_ip_forward       = optional(bool, false)<br>    description          = optional(string, null)<br>    instance_description = optional(string, null)<br>    labels               = optional(map(any), {})<br>    metadata             = optional(map(any), {})<br>    network_interfaces = list(object({<br>      network            = optional(string, null)<br>      subnetwork         = optional(string, null)<br>      subnetwork_project = optional(string, null)<br>      network_ip         = optional(string, null)<br>      queue_count        = optional(number, null)<br>      stack_type         = optional(string, "IPV4_ONLY")<br>    }))<br>    project = optional(string, null)<br>    region  = optional(string, null)<br>    reservation_affinity = optional(object({<br>      type = optional(string, "ANY_RESERVATION")<br>    }), null)<br>    scheduling = optional(object({<br>      automatic_restart   = optional(bool, true)<br>      on_host_maintenance = optional(string, "MIGRATE")<br>      preemptible         = optional(bool, false)<br>      provisioning_model  = optional(string, "STANDARD")<br>    }))<br>    service_account = optional(object({<br>      email  = optional(string, null)<br>      scopes = optional(list(string), ["cloud-platform"])<br>    }), null)<br>    tags = optional(list(string), [])<br>    guest_accelerator = optional(object({<br>      type  = string<br>      count = number<br>    }), null)<br>    min_cpu_platform = optional(string, null)<br>    shielded_instance_config = optional(object({<br>      enable_secure_boot          = optional(bool, false)<br>      enable_vtpm                 = optional(bool, true)<br>      enable_integrity_monitoring = optional(bool, true)<br>    }), null)<br>    confidential_instance_config = optional(object({<br>      enable_confidential_compute = optional(bool, false)<br>    }), null)<br>  }))</pre> | n/a | yes |
| <a name="input_update_policy"></a> [update\_policy](#input\_update\_policy) | The update policy for this managed instance group. | <pre>object({<br>    type                    = optional(string, "PROACTIVE")<br>    minimal_action          = optional(string, "REPLACE")<br>    max_surge_fixed         = optional(number, 1)<br>    max_unavailable_fixed   = optional(number, 1)<br>    max_surge_percent       = optional(number, null)<br>    max_unavailable_percent = optional(number, null)<br>    replacement_method      = optional(string, "SUBSTITUTE")<br>  })</pre> | `null` | no |
| <a name="input_versions"></a> [versions](#input\_versions) | Application versions managed by this instance group. Each version deals with a specific instance template, allowing canary release scenarios. | <pre>list(object({<br>    name              = string<br>    instance_template = string<br>    target_size = optional(object({<br>      fixed   = optional(number, null)<br>      percent = optional(number, null)<br>    }), null)<br>  }))</pre> | `[]` | no |
| <a name="input_wait_for_instances"></a> [wait\_for\_instances](#input\_wait\_for\_instances) | Whether to wait for all instances to be created/updated before returning. Note that if this is set to true and the operation does not succeed, Terraform will continue trying until it times out. | `bool` | `false` | no |
| <a name="input_wait_for_instances_status"></a> [wait\_for\_instances\_status](#input\_wait\_for\_instances\_status) | When used with wait\_for\_instances it specifies the status to wait for. When STABLE is specified this resource will wait until the instances are stable before returning. When UPDATED is set, it will wait for the version target to be reached and any per instance configs to be effective as well as all instances to be stable before returning. | `string` | `"STABLE"` | no |
| <a name="input_zone"></a> [zone](#input\_zone) | The zone that instances in this group should be created in. | `string` | `null` | no |
## Outputs

No outputs.
<!-- END_TF_DOCS -->